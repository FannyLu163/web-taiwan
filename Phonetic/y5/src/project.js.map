{"version":3,"sources":["assets/js/Miaomo/guiji.js","assets/js/Miaomo/mmGraphics.js","assets/js/Miaomo/mmTouch.js","assets/migration/use_v2.0.x_cc.Toggle_event.js"],"names":["cc","Class","extends","Component","properties","onLoad","this","gj","arr","type","point01","v2","time","point02","point03","x","y","getGj","num","getXYPoints","touchNode","default","Node","tooltip","guijiNode","isMiaoMobg","Boolean","isAudioGetGj","miaomoNum","console","log","getComponent","start","_this","graphics","Graphics","index","length","element","moveTo","bezierCurveTo","lineTo","stroke","actionRun","loadArr","seq","callFunc","_index","_element","bezier","bezierTo","sequence","JSON","stringify","runAction","update","dt","Math","round","setPos","a","newIndex","elementold","elementnew","fill","clearDraw","clear","graphicsNode","graphicsNode2","handNode","handNode1","handNode2","handIconNode","particlePrefab","Prefab","stepCountMax","stepCount","step","gameOver","schedule","updateGuide","onDestroy","unschedule","initAngle","init","node","handTween","arrIndex","on","EventType","TOUCH_START","event","touchBegin","updateStep","updateBackStep","handTweenStop","TOUCH_MOVE","nodeWorldPos","parent","convertToWorldSpaceAR","position","touch","getLocation","move","TOUCH_END","TOUCH_CANCEL","opacity","forward","tween","parallel","to","scale","easing","backward","out","_this2","stopAllActions","call","handShow","callback","interruptAnm","action","moveBy","getAngle","x1","y1","x2","y2","abs","z","sqrt","angle","asin","PI","dx","dy","max","distance","drawEnd","_this3","_this4","instantiate","active","addChild","showHand","scheduleOnce","removeFromParent","resetGame","isShowHand","Toggle","_triggerEventInScript_check"],"mappings":"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","sourcesContent":["\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        // values: [cc.Vec2],\n    },\n\n    // LIFE-CYCLE CALLBACKS:\n\n    onLoad () {\n        this.gj = [];\n        this.arr = [];\n\n        /**\n         * 根据上门ui妹子给出的轨迹点，写出下面轨迹数组。\n         * type：moveto 移动到point01，\n         * type：bezier 画贝塞尔曲线，point01，point02，point03是贝塞尔的三个参考点\n         * time：时长\n         *\n         */\n        this.gj[0] = [\n            {\"type\": \"moveto\",\"point01\" : cc.v2(48, 291)},\n            {\"type\" :\"bezier\",\"time\":1,\"point01\" : cc.v2(48, 291),\"point02\" : cc.v2(60, 291),\"point03\" : cc.v2(70, 291)},\n            {\"type\" :\"bezier\",\"time\":1,\"point01\" : cc.v2(85, 291),\"point02\" : cc.v2(100, 291),\"point03\" : cc.v2(115, 291)},\n            {\"type\" : \"bezier\",\"time\":1,\"point01\" : cc.v2(130, 291),\"point02\" : cc.v2(145, 291),\"point03\" : cc.v2(160, 291)},\n            {\"type\" : \"bezier\",\"time\":1,\"point01\" : cc.v2(175, 291),\"point02\" : cc.v2(190, 291),\"point03\" : cc.v2(205, 291)},\n            {\"type\" : \"bezier\",\"time\":1,\"point01\" : cc.v2(220, 291),\"point02\" : cc.v2(235, 291),\"point03\" : cc.v2(250, 291)},\n            {\"type\" : \"bezier\",\"time\":1,\"point01\" : cc.v2(265, 291),\"point02\" : cc.v2(280, 291),\"point03\" : cc.v2(295, 291)},\n            {\"type\" : \"bezier\",\"time\":1,\"point01\" : cc.v2(310, 291),\"point02\" : cc.v2(325, 291),\"point03\" : cc.v2(338, 291)},\n        ];\n\n        /**\n         * 获取到的描摹的坐标点\n         * @type {*[]}\n         */\n        this.arr[0] = \n            [{\"x\":48,\"y\":291},{\"x\":60,\"y\":291},{\"x\":70,\"y\":291},{\"x\":85,\"y\":291},{\"x\":100,\"y\":291},{\"x\":115,\"y\":291},\n            {\"x\":130,\"y\":291},{\"x\":145,\"y\":291},{\"x\":160,\"y\":291},{\"x\":175,\"y\":291},{\"x\":190,\"y\":291},{\"x\":205,\"y\":291},\n            {\"x\":220,\"y\":291},{\"x\":235,\"y\":291},{\"x\":250,\"y\":291},{\"x\":265,\"y\":291},{\"x\":280,\"y\":291},{\"x\":295,\"y\":291},\n            {\"x\":310,\"y\":291},{\"x\":325,\"y\":291},{\"x\":338,\"y\":291}\n        ];\n\n        this.gj[1] = [\n            {\"type\": \"moveto\",\"point01\" : cc.v2(127, 273)},\n            {\"type\" :\"bezier\",\"time\":1,\"point01\" : cc.v2(127, 273),\"point02\" : cc.v2(123, 260),\"point03\" : cc.v2(120, 245)},\n            {\"type\" :\"bezier\",\"time\":1,\"point01\" : cc.v2(113, 227),\"point02\" : cc.v2(105, 208),\"point03\" : cc.v2(105, 187)},\n            {\"type\" :\"bezier\",\"time\":1,\"point01\" : cc.v2(120, 187),\"point02\" : cc.v2(135, 187),\"point03\" : cc.v2(150, 187)},\n            {\"type\" :\"bezier\",\"time\":1,\"point01\" : cc.v2(165, 187),\"point02\" : cc.v2(180, 187),\"point03\" : cc.v2(195, 187)},\n            {\"type\" :\"bezier\",\"time\":1,\"point01\" : cc.v2(210, 187),\"point02\" : cc.v2(225, 187),\"point03\" : cc.v2(240, 187)},\n            {\"type\" :\"bezier\",\"time\":1,\"point01\" : cc.v2(265, 187),\"point02\" : cc.v2(280, 187),\"point03\" : cc.v2(295, 187)},\n            {\"type\" :\"bezier\",\"time\":1,\"point01\" : cc.v2(301, 171),\"point02\" : cc.v2(302, 146),\"point03\" : cc.v2(298, 123)},\n            {\"type\" :\"bezier\",\"time\":1,\"point01\" : cc.v2(296, 106),\"point02\" : cc.v2(290, 90),\"point03\" : cc.v2(285, 74)},\n            {\"type\" :\"bezier\",\"time\":1,\"point01\" : cc.v2(278, 66),\"point02\" : cc.v2(269, 50),\"point03\" : cc.v2(263, 43)}\n        ];\n\n        this.arr[1] = \n            [{\"x\":127,\"y\":273},{\"x\":123,\"y\":260},{\"x\":120,\"y\":245},{\"x\":113,\"y\":227},{\"x\":105,\"y\":208},{\"x\":105,\"y\":187},\n            {\"x\":120,\"y\":187},{\"x\":135,\"y\":187},{\"x\":150,\"y\":187},{\"x\":165,\"y\":187},{\"x\":180,\"y\":187},{\"x\":195,\"y\":187},\n            {\"x\":210,\"y\":187},{\"x\":225,\"y\":187},{\"x\":240,\"y\":187},{\"x\":265,\"y\":187},{\"x\":280,\"y\":187},{\"x\":295,\"y\":187},\n            {\"x\":301,\"y\":171},{\"x\":302,\"y\":146},{\"x\":298,\"y\":123},{\"x\":296,\"y\":106},{\"x\":290,\"y\":90},{\"x\":285,\"y\":74},\n            {\"x\":278,\"y\":66},{\"x\":269,\"y\":50},{\"x\":263,\"y\":43}\n        ];\n\n        this.gj[2] = [\n            {\"type\": \"moveto\",\"point01\" : cc.v2(229, 269)},\n            {\"type\" :\"bezier\",\"time\":1,\"point01\" : cc.v2(229, 269),\"point02\" : cc.v2(225, 260),\"point03\" : cc.v2(220, 240)},\n            {\"type\" :\"bezier\",\"time\":1,\"point01\" : cc.v2(216, 226),\"point02\" : cc.v2(215, 207),\"point03\" : cc.v2(208, 190)},\n            {\"type\" :\"bezier\",\"time\":1,\"point01\" : cc.v2(201, 172),\"point02\" : cc.v2(193, 153),\"point03\" : cc.v2(190, 143)},\n            {\"type\" :\"bezier\",\"time\":1,\"point01\" : cc.v2(179, 126),\"point02\" : cc.v2(167, 105),\"point03\" : cc.v2(160, 99)},\n            {\"type\" :\"bezier\",\"time\":1,\"point01\" : cc.v2(152, 87),\"point02\" : cc.v2(141, 77),\"point03\" : cc.v2(128, 64)},\n            {\"type\" :\"bezier\",\"time\":1,\"point01\" : cc.v2(114, 55),\"point02\" : cc.v2(105, 41),\"point03\" : cc.v2(105, 41)}\n        ];\n\n        this.arr[2] = [\n            {\"x\":229,\"y\":269},{\"x\":225,\"y\":260},{\"x\":220,\"y\":240},{\"x\":216,\"y\":226},{\"x\":215,\"y\":207},{\"x\":208,\"y\":190},\n            {\"x\":201,\"y\":172},{\"x\":193,\"y\":153},{\"x\":190,\"y\":143},{\"x\":179,\"y\":126},{\"x\":167,\"y\":105},{\"x\":160,\"y\":99},\n            {\"x\":152,\"y\":87},{\"x\":141,\"y\":77},{\"x\":128,\"y\":64},{\"x\":114,\"y\":55},{\"x\":105,\"y\":41},{\"x\":105,\"y\":41}\n        ];\n    },\n\n    //获取轨迹点\n    getGj (num) {\n        return this.gj[num]\n    },\n    //获取坐标点\n    getXYPoints (num) {\n        return this.arr[num]\n    },\n});\n","cc.Class({\n    extends: cc.Component,\n\n    properties: {\n        touchNode: {\n            default: null,\n            type: cc.Node,\n            tooltip: '绘制点（箭头）'\n        },\n\n        guijiNode: {\n            default: null,\n            type: cc.Node,\n            tooltip: '描摹区域'\n        },\n        isMiaoMobg: {\n            default: false,\n            type: Boolean,\n            tooltip: '是否作为描摹的底层'\n        },\n        isAudioGetGj: {\n            default: false,\n            type: Boolean,\n            tooltip: '是否能自动描摹获取轨迹坐标点'\n        },\n        miaomoNum: 0\n    },\n\n    // LIFE-CYCLE CALLBACKS:\n\n    onLoad() {\n        console.log(this.guijiNode);\n        // alert(1);\n        this.arr = this.guijiNode.getComponent(\"guiji\").getXYPoints(this.miaomoNum);\n        this.gj = this.guijiNode.getComponent(\"guiji\").getGj(this.miaomoNum);\n    },\n\n\n    start() {\n        cc.log(\"画笔开始绘制\");\n        this.graphics = this.getComponent(cc.Graphics);\n        let lv = 1;\n\n        if (this.isMiaoMobg) {//绘制描摹底部\n            for (let index = 0; index < this.gj.length; index++) {\n                const element = this.gj[index];\n                if (element.type === \"moveto\") {\n                    this.graphics.moveTo(element.point01.x, element.point01.y);\n                } else if (element.type === \"bezier\") {\n                    this.graphics.bezierCurveTo(element.point01.x, element.point01.y, element.point02.x, element.point02.y, element.point03.x, element.point03.y);\n                } else if (element.type === \"lineto\") {\n                    this.graphics.lineTo(element.point01.x, element.point01.y)\n                }\n            }\n            this.graphics.stroke();\n        } else {\n            if (this.isAudioGetGj) {\n                this.actionRun = true;\n                this.index = 1;\n                this.loadArr = [];\n\n                this.touchNode.x = this.gj[1].point01.x;\n                this.touchNode.y = this.gj[1].point01.y;\n\n                let seq = cc.callFunc(() => {\n\n                }, this);\n\n                for (let index = 0; index < this.gj.length; index++) {\n                    const element = this.gj[index];\n                    if (element.type === \"moveto\") {\n                        cc.log(\"moveto: \" + element.point01.x + \"   \" + element.point01.y)\n                    } else if (element.type === \"bezier\") {\n                        let bezier = [element.point01, element.point02, element.point03];\n                        let bezierTo = cc.bezierTo(element.time, bezier);\n                        seq = cc.sequence(seq, bezierTo)\n                    } else if (element.type === \"lineto\") {\n                        let moveTo = cc.moveTo(element.time, element.point01);\n                        seq = cc.sequence(seq, moveTo)\n                    }\n                }\n\n                let callFunc = cc.callFunc(() => {\n                    this.actionRun = false;\n\n                    cc.log(JSON.stringify(this.loadArr));\n                }, this);\n\n                seq = cc.sequence(seq, callFunc);\n\n                this.touchNode.runAction(seq);\n            }\n        }\n\n    },\n\n    update(dt) {\n        if (this.isAudioGetGj) {\n            if (!this.isMiaoMobg && this.actionRun) {\n                cc.log(\"this.touchNode update: \"+this.touchNode.x+\"   \"+this.touchNode.y)\n                this.loadArr[this.index] = cc.v2(Math.round(this.touchNode.x * 100) / 100, Math.round(this.touchNode.y * 100) / 100)\n\n                this.index += 1\n            }\n        }\n    },\n\n    setPos(index) {\n        if (this.isMiaoMobg) {\n            return\n        }\n\n        for (let a = this.newIndex; a < index; a++) {\n\n            const elementold = this.arr[a - 1] || this.arr[a];\n            const elementnew = this.arr[a];\n\n            this.graphics.moveTo(elementold.x, elementold.y);\n\n            this.graphics.lineTo(elementnew.x, elementnew.y);\n\n            this.graphics.stroke();\n            this.graphics.fill();\n        }\n\n        this.newIndex = index;\n\n\n    },\n\n    clearDraw() {\n        this.graphics.clear();\n        // this.touchNode.x = this.arr[0].x\n        // this.touchNode.y = this.arr[0].y\n        this.touchNode.x = this.gj[1].point01.x;\n        this.touchNode.y = this.gj[1].point01.y;\n    }\n\n    // update (dt) {},\n});\n","cc.Class({\n    extends: cc.Component,\n\n    properties: {\n        //在那个区域描摹\n        guijiNode: {\n            default: null,\n            type: cc.Node,\n            tooltip: '轨迹所在区域'\n        },\n        //描摹的画笔\n        graphicsNode: {\n            default: null,\n            type: cc.Node,\n            tooltip: '用来描摹的画笔'\n        },\n        graphicsNode2: {\n            default: null,\n            type: cc.Node,\n            tooltip: '用来描摹的画笔'\n        },\n        handNode: {\n            default: null,\n            type: cc.Node,\n            tooltip: '轨迹所在区域'\n        },\n        handNode1: {\n            default: null,\n            type: cc.Node,\n            tooltip: '轨迹所在区域'\n        },\n        handNode2: {\n            default: null,\n            type: cc.Node,\n            tooltip: '轨迹所在区域'\n        },\n        handIconNode: {\n            default: null,\n            type: cc.Node,\n            tooltip: '手指'\n        },\n        miaomoNum: 0,\n        particlePrefab: cc.Prefab,\n        stepCountMax: 3,\n        stepCount: 3,\n        step: 1,\n        gameOver: false,\n    },\n\n    onLoad() {\n        //获取描摹2需要的轨迹点\n        this.arr = this.guijiNode.getComponent(\"guiji\").getXYPoints(this.miaomoNum);\n        if (this.miaomoNum==0) {\n            this.schedule(this.updateGuide, 10);\n        }\n    },\n\n    onDestroy() {\n        // 当这个节点被销毁时，取消定时器\n        this.unschedule(this.updateGuide);\n    },\n\n    //设置箭头方向（包括描摹过程中箭头的方向）\n    initAngle() {\n        // let angle = this.getAngle(this.arr[0].x, this.arr[0].y, this.arr[2].x, this.arr[2].y);\n        // this.node.rotation = -angle;\n    },\n\n    start() {\n        if (this.arr.length === 0) {\n            return;\n        }\n        this.initAngle();\n        this.init();\n    },\n\n    init() {\n        let node = this.node;\n        node.x = this.arr[1].x;\n        node.y = this.arr[1].y;\n        this.handTween();\n\n        this.gameOver = false;\n        this.arrIndex = 1;\n\n        node.on(cc.Node.EventType.TOUCH_START, (event) => {\n            this.touchBegin = true;\n            // this.handNode.active = false;\n            this.unschedule(this.updateStep);\n            this.unschedule(this.updateBackStep);\n            this.handTweenStop();\n        }, node);\n\n        node.on(cc.Node.EventType.TOUCH_MOVE, (event) => {\n            if (!this.touchBegin) {\n                return\n            }\n\n            let nodeWorldPos = this.node.parent.convertToWorldSpaceAR(cc.v2(this.node.x, this.node.y));\n            let position = event.touch.getLocation();\n            cc.log(\"position\" + position.x, position.y);\n            cc.log(\"nodeWorldPos\" + nodeWorldPos.x, nodeWorldPos.y);\n\n            this.move(cc.v2(position.x - nodeWorldPos.x, position.y - nodeWorldPos.y));\n        }, node);\n\n        node.on(cc.Node.EventType.TOUCH_END, (event) => {\n            this.touchBegin = false;\n            this.handTween();\n        }, node);\n\n        node.on(cc.Node.EventType.TOUCH_CANCEL, (event) => {\n            this.touchBegin = false;\n            this.handTween();\n        }, node);\n    },\n\n    handTween() {\n        if (this.gameOver) return\n        this.handIconNode.opacity = 255;\n        const forward = cc.tween().parallel(\n            cc.tween().to(1, {scale: 0.5}, {easing: 'sineOut'}),\n            cc.tween().to(1, {y: -5}, {easing: 'quadOut'}))\n        const backward = cc.tween().parallel(\n            cc.tween().to(1, {scale: 1}, {easing: 'sineIn'}),\n            cc.tween().to(1, {y: 0}, {easing: 'quadIn'}))\n        const out = cc.tween().parallel(\n            cc.tween().to(0.5, {scale: 0.5}, {easing: 'sineOut'}),\n            cc.tween().to(0.5, {opacity: 0}, {easing: 'sineOut'}),\n            cc.tween().to(1, {y: 0}, {easing: 'quadIn'}))\n        cc.tween(this.handIconNode)\n            .sequence(forward, backward, forward, backward, out)\n            .start();\n    },\n\n    handTweenStop() {\n        // 停止所有正在运行的tween动画\n        this.stopAllActions();\n        cc.tween(this.handIconNode).parallel(\n            cc.tween().to(0.01, {scale: 1}, {easing: 'sineIn'}),\n            cc.tween().to(0.01, {opacity: 255}, {easing: 'quadIn'}),\n            cc.tween().to(0.01, {y: 0}, {easing: 'quadIn'}))\n        .call(() => {\n            this.handIconNode.stopAllActions(); \n        })\n        .start();\n    },\n\n    handShow(callback) {\n        this.stopAllActions();\n        cc.tween(this.handIconNode).parallel(\n            cc.tween().to(0.5, {scale: 1}, {easing: 'sineIn'}),\n            cc.tween().to(0.5, {opacity: 255}, {easing: 'quadIn'}),\n            cc.tween().to(0.5, {y: 0}, {easing: 'quadIn'}))\n        .call(callback)\n        .start();\n    },\n\n    stopAllActions() {\n        this.handIconNode.stopAllActions();\n        this.handIconNode.opacity = 0;\n    },\n\n    //箭头复原动画\n    interruptAnm(position) {\n        let action = cc.sequence(\n            cc.moveBy(0.2, position.x, position.y),\n            cc.moveBy(0.2, -position.x, -position.y)\n        );\n        this.node.runAction(action);\n    },\n\n    //获取描摹过程中，箭头要跟着轨迹旋转的角度let\n    getAngle(x1, y1, x2, y2) {\n        // 直角的边长\n        let x = Math.abs(x1 - x2);\n        let y = Math.abs(y1 - y2);\n        let z = Math.sqrt(x * x + y * y);\n        let angle = Math.round((Math.asin(y / z) / Math.PI * 180));\n\n        if (y2 > y1 && x2 < x1) {\n            angle = 180 - angle;\n        } else if (y2 < y1 && x2 < x1) {\n            angle = 180 + angle;\n        } else if (y2 < y1 && x2 > x1) {\n            angle = 360 - angle;\n        }\n        return angle;\n    },\n\n    //根据轨迹坐标点描摹\n    move(position) {\n        if (this.gameOver) {\n            cc.log(\"游戏已经结束，顺利的描摹出来2了 !!!\");\n            return;\n        }\n        let dx = position.x + this.node.x;\n        let dy = position.y + this.node.y;\n\n        let node_d = (position.x) * (position.x) + (position.y) * (position.y)\n        if (node_d > 120 * 120) {\n            cc.log(\" Beyond the scope Beyond the scope Beyond the scope \");\n            this.interruptAnm(position);\n            this.touchBegin = false;\n            return;\n        }\n\n        let range = 20;\n        let distance = 35;\n        let max = this.arrIndex + range;\n        if (max >= this.arr.length) {\n            // this.touchBegin = false\n            // this.gameOver = true\n            // cc.log(\"game over \")\n            // return\n            max = this.arr.length;\n        }\n        for (let index = this.arrIndex; index < max; index++) {\n            // let index = max\n            const element = this.arr[index];\n            // cc.log(\"index  \"+index)\n            let d = (dx - element.x) * (dx - element.x) + (dy - element.y) * (dy - element.y)\n            if (d < distance * distance) {\n                this.graphicsNode.getComponent('mmGraphics').setPos(index);\n                this.arrIndex = index;\n                this.node.x = element.x;\n                this.node.y = element.y;\n\n                if (index === this.arr.length - 1) {\n                    this.drawEnd();\n                } else {\n                    // let angle = this.getAngle(this.arr[index].x, this.arr[index].y, this.arr[index + 1].x, this.arr[index + 1].y);\n                    // this.node.rotation = -angle;\n                }\n            }\n        }\n    },\n\n    //演示引导\n    updateGuide: function (dt) {\n        cc.log('updateGuide touchBegin = ' + this.touchBegin);\n        if (this.touchBegin) return;\n        this.stepCount = this.arrIndex+this.stepCountMax;\n        this.step = this.arrIndex;\n        let max = this.arr.length;\n        if (this.stepCount > max) {\n            this.stepCount = max;\n        }\n\n        this.handShow(() => {\n            this.schedule(this.updateStep, 0.25);\n        });\n    },\n\n    updateStep: function (dt) {\n        cc.log('updateStep touchBegin = ' + this.touchBegin);\n        if (this.touchBegin) return;\n        // let index = max\n        let index = this.step;\n        const element = this.arr[index];\n        cc.log(\"updateStep index  \"+index)\n        this.graphicsNode.getComponent('mmGraphics').setPos(index);\n        this.node.x = element.x;\n        this.node.y = element.y;\n        this.step = ++index;\n        cc.log(\"updateStep step  \" + this.step + \" , stepCount = \" + this.stepCount);\n        if (this.step>=this.stepCount) {\n            this.unschedule(this.updateStep);\n            this.schedule(this.updateBackStep, 0.25);\n        }\n    },\n\n    updateBackStep: function (dt) {\n        cc.log('updateBackStep touchBegin = ' + this.touchBegin);\n        if (this.touchBegin) return;\n\n        this.graphicsNode.getComponent('mmGraphics').clearDraw();\n        for (let _index = 0; _index <= this.step; _index++) {\n            const _element = this.arr[_index];\n            if (null!=_element) {\n                cc.log(\"updateStep _index  \"+_index);\n                this.graphicsNode.getComponent('mmGraphics').setPos(_index);\n                this.node.x = _element.x;\n                this.node.y = _element.y;\n            }\n        }\n\n        this.step--;\n        if (this.step<this.arrIndex) {\n            this.unschedule(this.updateBackStep);\n            this.step = 1;\n            // this.handNode.active = false;\n            this.handTween();\n        }\n    },\n\n    //描摹完成\n    drawEnd() {\n        cc.log('drawEnd');\n        this.unschedule(this.updateGuide);\n        this.touchBegin = false;\n        this.gameOver = true;\n        // 停止所有正在运行的tween动画\n        this.stopAllActions();\n\n        if (null==this.handNode2) {\n            const particlePrefab = cc.instantiate(this.particlePrefab);\n            particlePrefab.active = true;\n            this.guijiNode.addChild(particlePrefab);\n            this.showHand(false);\n\n            this.scheduleOnce(() => {\n                cc.log('drawEnd ClearDraw');\n                particlePrefab.removeFromParent();\n                this.resetGame(false);\n                if (null!=this.handNode1) {\n                    this.handNode1.getComponent('mmTouch').resetGame(true);\n                }\n            }, 5);\n        } else {\n            this.handNode2.active = true;\n            this.graphicsNode2.active = true;\n            this.showHand(false);\n            this.handNode2.getComponent('mmTouch').showHand(true);\n        }\n    },\n\n    showHand(isShowHand) {\n        this.handIconNode.active = false;\n        if (isShowHand) {\n            this.schedule(this.updateGuide, 10);\n            this.handIconNode.active = true;\n            this.handTween()\n        } else {\n            this.stopAllActions(); \n        }\n    },\n\n    resetGame(isShowHand) {\n        if (null!=this.handNode2) {\n            this.handNode2.active = false;\n            this.graphicsNode2.active = false;\n            this.handNode2.getComponent('mmTouch').resetGame(false);\n        }\n        this.graphicsNode.getComponent('mmGraphics').clearDraw();\n        this.graphicsNode.getComponent('mmGraphics').setPos(1);\n        const _element = this.arr[1];\n        this.node.x = _element.x;\n        this.node.y = _element.y;\n        this.gameOver = false;\n        this.handIconNode.active = true;\n        this.arrIndex = 1;\n        this.stepCount = this.stepCountMax;\n        this.step = 1;\n        this.showHand(isShowHand);\n        this.initAngle();\n    },\n\n});","/*\n * This script is automatically generated by Cocos Creator and is only compatible with projects prior to v2.1.0.\n * You do not need to manually add this script in any other project.\n * If you don't use cc.Toggle in your project, you can delete this script directly.\n * If your project is hosted in VCS such as git, submit this script together.\n *\n * 此脚本由 Cocos Creator 自动生成，仅用于兼容 v2.1.0 之前版本的工程，\n * 你无需在任何其它项目中手动添加此脚本。\n * 如果你的项目中没用到 Toggle，可直接删除该脚本。\n * 如果你的项目有托管于 git 等版本库，请将此脚本一并上传。\n */\n\nif (cc.Toggle) {\n    // Whether the 'toggle' and 'checkEvents' events are fired when 'toggle.check() / toggle.uncheck()' is called in the code\n    // 在代码中调用 'toggle.check() / toggle.uncheck()' 时是否触发 'toggle' 与 'checkEvents' 事件\n    cc.Toggle._triggerEventInScript_check = true;\n}\n"],"file":"project.js"}