window.__require=function t(e,i,o){function c(s,h){if(!i[s]){if(!e[s]){var p=s.split("/");if(p=p[p.length-1],!e[p]){var a="function"==typeof __require&&__require;if(!h&&a)return a(p,!0);if(n)return n(p,!0);throw new Error("Cannot find module '"+s+"'")}s=p}var r=i[s]={exports:{}};e[s][0].call(r.exports,function(t){return c(e[s][1][t]||t)},r,r.exports,t,e,i,o)}return i[s].exports}for(var n="function"==typeof __require&&__require,s=0;s<o.length;s++)c(o[s]);return c}({guiji:[function(t,e,i){"use strict";cc._RF.push(e,"00ccfAmO0ZD8LgxYtwy5pTW","guiji"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.gj=[],this.arr=[],this.gj[0]=[{type:"moveto",point01:cc.v2(99,275)},{type:"bezier",time:1,point01:cc.v2(99,275),point02:cc.v2(99,265),point03:cc.v2(99,245)},{type:"bezier",time:1,point01:cc.v2(99,230),point02:cc.v2(99,215),point03:cc.v2(99,200)},{type:"bezier",time:1,point01:cc.v2(99,185),point02:cc.v2(99,170),point03:cc.v2(99,155)},{type:"bezier",time:1,point01:cc.v2(99,155),point02:cc.v2(115,155),point03:cc.v2(130,155)},{type:"bezier",time:1,point01:cc.v2(145,155),point02:cc.v2(160,155),point03:cc.v2(175,155)},{type:"bezier",time:1,point01:cc.v2(190,155),point02:cc.v2(205,155),point03:cc.v2(220,155)},{type:"bezier",time:1,point01:cc.v2(235,155),point02:cc.v2(255,155),point03:cc.v2(275,156)}],this.arr[0]=[{x:99,y:275},{x:99,y:265},{x:99,y:245},{x:99,y:230},{x:99,y:215},{x:99,y:200},{x:99,y:185},{x:99,y:170},{x:99,y:155},{x:99,y:155},{x:115,y:155},{x:130,y:155},{x:145,y:155},{x:160,y:155},{x:175,y:155},{x:190,y:155},{x:205,y:155},{x:220,y:155},{x:235,y:155},{x:255,y:155},{x:275,y:156}],this.gj[1]=[{type:"moveto",point01:cc.v2(290,275)},{type:"bezier",time:1,point01:cc.v2(290,275),point02:cc.v2(290,260),point03:cc.v2(290,245)},{type:"bezier",time:1,point01:cc.v2(290,230),point02:cc.v2(290,215),point03:cc.v2(290,200)},{type:"bezier",time:1,point01:cc.v2(290,185),point02:cc.v2(290,176),point03:cc.v2(290,167)},{type:"bezier",time:1,point01:cc.v2(290,157),point02:cc.v2(290,147),point03:cc.v2(290,137)}],this.arr[1]=[{x:290,y:275},{x:290,y:260},{x:290,y:245},{x:290,y:230},{x:290,y:215},{x:290,y:200},{x:290,y:185},{x:290,y:176},{x:290,y:167},{x:290,y:157},{x:290,y:147},{x:290,y:137}],this.gj[2]=[{type:"moveto",point01:cc.v2(193,312)},{type:"bezier",time:1,point01:cc.v2(193,312),point02:cc.v2(193,297),point03:cc.v2(193,285)},{type:"bezier",time:1,point01:cc.v2(193,270),point02:cc.v2(193,255),point03:cc.v2(193,240)},{type:"bezier",time:1,point01:cc.v2(193,225),point02:cc.v2(193,210),point03:cc.v2(193,195)},{type:"bezier",time:1,point01:cc.v2(193,180),point02:cc.v2(193,170),point03:cc.v2(193,160)},{type:"bezier",time:1,point01:cc.v2(193,150),point02:cc.v2(193,140),point03:cc.v2(193,130)},{type:"bezier",time:1,point01:cc.v2(193,120),point02:cc.v2(193,105),point03:cc.v2(193,80)}],this.arr[2]=[{x:193,y:312},{x:193,y:297},{x:193,y:285},{x:193,y:270},{x:193,y:255},{x:193,y:240},{x:193,y:225},{x:193,y:210},{x:193,y:195},{x:193,y:180},{x:193,y:170},{x:193,y:160},{x:193,y:150},{x:193,y:140},{x:193,y:130},{x:193,y:120},{x:193,y:105},{x:193,y:80}],this.gj[3]=[{type:"moveto",point01:cc.v2(48,60)},{type:"bezier",time:1,point01:cc.v2(48,60),point02:cc.v2(60,60),point03:cc.v2(75,60)},{type:"bezier",time:1,point01:cc.v2(90,60),point02:cc.v2(105,60),point03:cc.v2(120,60)},{type:"bezier",time:1,point01:cc.v2(135,60),point02:cc.v2(150,60),point03:cc.v2(165,60)},{type:"bezier",time:1,point01:cc.v2(180,60),point02:cc.v2(195,60),point03:cc.v2(210,60)},{type:"bezier",time:1,point01:cc.v2(225,60),point02:cc.v2(240,60),point03:cc.v2(255,60)},{type:"bezier",time:1,point01:cc.v2(270,60),point02:cc.v2(285,60),point03:cc.v2(295,60)},{type:"bezier",time:1,point01:cc.v2(305,60),point02:cc.v2(322,60),point03:cc.v2(337,60)}],this.arr[3]=[{x:48,y:60},{x:60,y:60},{x:75,y:60},{x:90,y:60},{x:105,y:60},{x:120,y:60},{x:135,y:60},{x:150,y:60},{x:165,y:60},{x:180,y:60},{x:195,y:60},{x:210,y:60},{x:225,y:60},{x:240,y:60},{x:255,y:60},{x:270,y:60},{x:285,y:60},{x:295,y:60},{x:305,y:60},{x:322,y:60},{x:337,y:60}]},getGj:function(t){return this.gj[t]},getXYPoints:function(t){return this.arr[t]}}),cc._RF.pop()},{}],mmGraphics:[function(t,e,i){"use strict";cc._RF.push(e,"824cf0H51NKPLBhh/K3mIxQ","mmGraphics"),cc.Class({extends:cc.Component,properties:{touchNode:{default:null,type:cc.Node,tooltip:"\u7ed8\u5236\u70b9\uff08\u7bad\u5934\uff09"},guijiNode:{default:null,type:cc.Node,tooltip:"\u63cf\u6479\u533a\u57df"},isMiaoMobg:{default:!1,type:Boolean,tooltip:"\u662f\u5426\u4f5c\u4e3a\u63cf\u6479\u7684\u5e95\u5c42"},isAudioGetGj:{default:!1,type:Boolean,tooltip:"\u662f\u5426\u80fd\u81ea\u52a8\u63cf\u6479\u83b7\u53d6\u8f68\u8ff9\u5750\u6807\u70b9"},miaomoNum:0},onLoad:function(){console.log(this.guijiNode),this.arr=this.guijiNode.getComponent("guiji").getXYPoints(this.miaomoNum),this.gj=this.guijiNode.getComponent("guiji").getGj(this.miaomoNum)},start:function(){var t=this;cc.log("\u753b\u7b14\u5f00\u59cb\u7ed8\u5236"),this.graphics=this.getComponent(cc.Graphics);if(this.isMiaoMobg){for(var e=0;e<this.gj.length;e++){var i=this.gj[e];"moveto"===i.type?this.graphics.moveTo(i.point01.x,i.point01.y):"bezier"===i.type?this.graphics.bezierCurveTo(i.point01.x,i.point01.y,i.point02.x,i.point02.y,i.point03.x,i.point03.y):"lineto"===i.type&&this.graphics.lineTo(i.point01.x,i.point01.y)}this.graphics.stroke()}else if(this.isAudioGetGj){this.actionRun=!0,this.index=1,this.loadArr=[],this.touchNode.x=this.gj[1].point01.x,this.touchNode.y=this.gj[1].point01.y;for(var o=cc.callFunc(function(){},this),c=0;c<this.gj.length;c++){var n=this.gj[c];if("moveto"===n.type)cc.log("moveto: "+n.point01.x+"   "+n.point01.y);else if("bezier"===n.type){var s=[n.point01,n.point02,n.point03],h=cc.bezierTo(n.time,s);o=cc.sequence(o,h)}else if("lineto"===n.type){var p=cc.moveTo(n.time,n.point01);o=cc.sequence(o,p)}}var a=cc.callFunc(function(){t.actionRun=!1,cc.log(JSON.stringify(t.loadArr))},this);o=cc.sequence(o,a),this.touchNode.runAction(o)}},update:function(t){this.isAudioGetGj&&!this.isMiaoMobg&&this.actionRun&&(cc.log("this.touchNode update: "+this.touchNode.x+"   "+this.touchNode.y),this.loadArr[this.index]=cc.v2(Math.round(100*this.touchNode.x)/100,Math.round(100*this.touchNode.y)/100),this.index+=1)},setPos:function(t){if(!this.isMiaoMobg){for(var e=this.newIndex;e<t;e++){var i=this.arr[e-1]||this.arr[e],o=this.arr[e];this.graphics.moveTo(i.x,i.y),this.graphics.lineTo(o.x,o.y),this.graphics.stroke(),this.graphics.fill()}this.newIndex=t}},clearDraw:function(){this.graphics.clear(),this.touchNode.x=this.gj[1].point01.x,this.touchNode.y=this.gj[1].point01.y}}),cc._RF.pop()},{}],mmTouch:[function(t,e,i){"use strict";cc._RF.push(e,"2d0aarOUkVELqqWpUBuwtGh","mmTouch"),cc.Class({extends:cc.Component,properties:{guijiNode:{default:null,type:cc.Node,tooltip:"\u8f68\u8ff9\u6240\u5728\u533a\u57df"},graphicsNode:{default:null,type:cc.Node,tooltip:"\u7528\u6765\u63cf\u6479\u7684\u753b\u7b14"},graphicsNode2:{default:null,type:cc.Node,tooltip:"\u7528\u6765\u63cf\u6479\u7684\u753b\u7b14"},handNode:{default:null,type:cc.Node,tooltip:"\u8f68\u8ff9\u6240\u5728\u533a\u57df"},handNode1:{default:null,type:cc.Node,tooltip:"\u8f68\u8ff9\u6240\u5728\u533a\u57df"},handNode2:{default:null,type:cc.Node,tooltip:"\u8f68\u8ff9\u6240\u5728\u533a\u57df"},handIconNode:{default:null,type:cc.Node,tooltip:"\u624b\u6307"},miaomoNum:0,particlePrefab:cc.Prefab,stepCountMax:3,stepCount:3,step:1,gameOver:!1},onLoad:function(){this.arr=this.guijiNode.getComponent("guiji").getXYPoints(this.miaomoNum),0==this.miaomoNum&&this.schedule(this.updateGuide,10)},onDestroy:function(){this.unschedule(this.updateGuide)},initAngle:function(){},start:function(){0!==this.arr.length&&(this.initAngle(),this.init())},init:function(){var t=this,e=this.node;e.x=this.arr[1].x,e.y=this.arr[1].y,this.handTween(),this.gameOver=!1,this.arrIndex=1,e.on(cc.Node.EventType.TOUCH_START,function(e){t.touchBegin=!0,t.unschedule(t.updateStep),t.unschedule(t.updateBackStep),t.handTweenStop()},e),e.on(cc.Node.EventType.TOUCH_MOVE,function(e){if(t.touchBegin){var i=t.node.parent.convertToWorldSpaceAR(cc.v2(t.node.x,t.node.y)),o=e.touch.getLocation();cc.log("position"+o.x,o.y),cc.log("nodeWorldPos"+i.x,i.y),t.move(cc.v2(o.x-i.x,o.y-i.y))}},e),e.on(cc.Node.EventType.TOUCH_END,function(e){t.touchBegin=!1,t.handTween()},e),e.on(cc.Node.EventType.TOUCH_CANCEL,function(e){t.touchBegin=!1,t.handTween()},e)},handTween:function(){if(!this.gameOver){this.handIconNode.opacity=255;var t=cc.tween().parallel(cc.tween().to(1,{scale:.5},{easing:"sineOut"}),cc.tween().to(1,{y:-5},{easing:"quadOut"})),e=cc.tween().parallel(cc.tween().to(1,{scale:1},{easing:"sineIn"}),cc.tween().to(1,{y:0},{easing:"quadIn"})),i=cc.tween().parallel(cc.tween().to(.5,{scale:.5},{easing:"sineOut"}),cc.tween().to(.5,{opacity:0},{easing:"sineOut"}),cc.tween().to(1,{y:0},{easing:"quadIn"}));cc.tween(this.handIconNode).sequence(t,e,t,e,i).start()}},handTweenStop:function(){var t=this;this.stopAllActions(),cc.tween(this.handIconNode).parallel(cc.tween().to(.01,{scale:1},{easing:"sineIn"}),cc.tween().to(.01,{opacity:255},{easing:"quadIn"}),cc.tween().to(.01,{y:0},{easing:"quadIn"})).call(function(){t.handIconNode.stopAllActions()}).start()},handShow:function(t){this.stopAllActions(),cc.tween(this.handIconNode).parallel(cc.tween().to(.5,{scale:1},{easing:"sineIn"}),cc.tween().to(.5,{opacity:255},{easing:"quadIn"}),cc.tween().to(.5,{y:0},{easing:"quadIn"})).call(t).start()},stopAllActions:function(){this.handIconNode.stopAllActions(),this.handIconNode.opacity=0},interruptAnm:function(t){var e=cc.sequence(cc.moveBy(.2,t.x,t.y),cc.moveBy(.2,-t.x,-t.y));this.node.runAction(e)},getAngle:function(t,e,i,o){var c=Math.abs(t-i),n=Math.abs(e-o),s=Math.sqrt(c*c+n*n),h=Math.round(Math.asin(n/s)/Math.PI*180);return o>e&&i<t?h=180-h:o<e&&i<t?h=180+h:o<e&&i>t&&(h=360-h),h},move:function(t){if(this.gameOver)cc.log("\u6e38\u620f\u5df2\u7ecf\u7ed3\u675f\uff0c\u987a\u5229\u7684\u63cf\u6479\u51fa\u67652\u4e86 !!!");else{var e=t.x+this.node.x,i=t.y+this.node.y;if(t.x*t.x+t.y*t.y>14400)return cc.log(" Beyond the scope Beyond the scope Beyond the scope "),this.interruptAnm(t),void(this.touchBegin=!1);var o=this.arrIndex+20;o>=this.arr.length&&(o=this.arr.length);for(var c=this.arrIndex;c<o;c++){var n=this.arr[c];(e-n.x)*(e-n.x)+(i-n.y)*(i-n.y)<1225&&(this.graphicsNode.getComponent("mmGraphics").setPos(c),this.arrIndex=c,this.node.x=n.x,this.node.y=n.y,c===this.arr.length-1&&this.drawEnd())}}},updateGuide:function(t){var e=this;if(cc.log("updateGuide touchBegin = "+this.touchBegin),!this.touchBegin){this.stepCount=this.arrIndex+this.stepCountMax,this.step=this.arrIndex;var i=this.arr.length;this.stepCount>i&&(this.stepCount=i),this.handShow(function(){e.schedule(e.updateStep,.25)})}},updateStep:function(t){if(cc.log("updateStep touchBegin = "+this.touchBegin),!this.touchBegin){var e=this.step,i=this.arr[e];cc.log("updateStep index  "+e),this.graphicsNode.getComponent("mmGraphics").setPos(e),this.node.x=i.x,this.node.y=i.y,this.step=++e,cc.log("updateStep step  "+this.step+" , stepCount = "+this.stepCount),this.step>=this.stepCount&&(this.unschedule(this.updateStep),this.schedule(this.updateBackStep,.25))}},updateBackStep:function(t){if(cc.log("updateBackStep touchBegin = "+this.touchBegin),!this.touchBegin){this.graphicsNode.getComponent("mmGraphics").clearDraw();for(var e=0;e<=this.step;e++){var i=this.arr[e];null!=i&&(cc.log("updateStep _index  "+e),this.graphicsNode.getComponent("mmGraphics").setPos(e),this.node.x=i.x,this.node.y=i.y)}this.step--,this.step<this.arrIndex&&(this.unschedule(this.updateBackStep),this.step=1,this.handTween())}},drawEnd:function(){var t=this;if(cc.log("drawEnd"),this.unschedule(this.updateGuide),this.touchBegin=!1,this.gameOver=!0,this.stopAllActions(),null==this.handNode2){var e=cc.instantiate(this.particlePrefab);e.active=!0,this.guijiNode.addChild(e),this.showHand(!1),this.scheduleOnce(function(){cc.log("drawEnd ClearDraw"),e.removeFromParent(),t.resetGame(!1),null!=t.handNode1&&t.handNode1.getComponent("mmTouch").resetGame(!0)},5)}else this.handNode2.active=!0,this.graphicsNode2.active=!0,this.showHand(!1),this.handNode2.getComponent("mmTouch").showHand(!0)},showHand:function(t){this.handIconNode.active=!1,t?(this.schedule(this.updateGuide,10),this.handIconNode.active=!0,this.handTween()):this.stopAllActions()},resetGame:function(t){null!=this.handNode2&&(this.handNode2.active=!1,this.graphicsNode2.active=!1,this.handNode2.getComponent("mmTouch").resetGame(!1)),this.graphicsNode.getComponent("mmGraphics").clearDraw(),this.graphicsNode.getComponent("mmGraphics").setPos(1);var e=this.arr[1];this.node.x=e.x,this.node.y=e.y,this.gameOver=!1,this.handIconNode.active=!0,this.arrIndex=1,this.stepCount=this.stepCountMax,this.step=1,this.showHand(t),this.initAngle()}}),cc._RF.pop()},{}],"use_v2.0.x_cc.Toggle_event":[function(t,e,i){"use strict";cc._RF.push(e,"8e3e3ADXpNFlZFmtVuFaqBq","use_v2.0.x_cc.Toggle_event"),cc.Toggle&&(cc.Toggle._triggerEventInScript_check=!0),cc._RF.pop()},{}]},{},["guiji","mmGraphics","mmTouch","use_v2.0.x_cc.Toggle_event"]);
//# sourceMappingURL=project.js.map
